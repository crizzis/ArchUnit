dependencies {
    compile project(':archunit')
    compile dependency.junit

    testCompile dependency.mockito
    testCompile dependency.assertj
    testCompile(dependency.assertj_guava) {
        exclude module: 'assertj-core'
    }
    testCompile project(path: ':archunit', configuration: 'tests')
}

test {
    if (!project.hasProperty('allTests')) {
        useJUnit {
            excludeCategories 'com.tngtech.archunit.junit.Slow'
        }
    }
}

// NOTE: Quick and dirty: maven plugin doesn't treat testJar dependencies correctly
install.repositories.mavenInstaller.pom.whenConfigured { pom ->
    pom.dependencies.find {
        it.artifactId == 'archunit' && it.scope == 'test'
    }.type = 'test-jar'
}
